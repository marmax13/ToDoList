@model List<ToDoList.Web.Models.MyTask>

@{
    ViewData["Title"] = "Все задачи";
}

<h1>Все задачи    Добавить задачу</h1>
<hr />
<h3>Номер         Название задачи        Приоритет          Статус        Действия</h3>
<hr />
<p>
    <a asp-action="Create" class="btn btn-success">Создать новую</a>
</p>
<ul class="list-group">
    @foreach (var item in Model)
    {
        @if (item.ParentId == 0)
        {
            <li class="list-group-item">
                <a asp-action="Details" asp-route-id="@item.Id">
                    @item.Name
                </a>
                <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-danger float-end">
                    Редактировать
                </a>
            </li>
            @foreach (var itemInside in Model)
            {
                @if (item.Id == itemInside.ParentId)
                {
                    <li class="list-group-item">
                        <span>&nbsp;&nbsp;-&nbsp;&nbsp;</span>
                        <a asp-action="Details" asp-route-id="@itemInside.Id">
                            @itemInside.Name
                        </a>
                        <a asp-action="Edit" asp-route-id="@itemInside.Id" class="btn btn-danger float-end">
                            Редактировать
                        </a>
                    </li>
                }
            }
        }
    }
</ul>